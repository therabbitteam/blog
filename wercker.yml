box: node

build:
  steps:
    - npm-install
    - script:
        name: install bower package
        code: bower install
    - script:
        name: echo nodejs information
        code: |
          echo "node version $(node -v) running"
          echo "npm version $(npm -v) running"
    - script:
        name: run metalsmith build
        code: npm run production
    - npm-test
    - script:
        name: run eslint
        code: npm run lint
    - script:
        name: copy build to the to-be-deployed directory
        code: cp -a ./. $WERCKER_OUTPUT_DIR
deploy:
  box: nodesource/trusty
  steps:
    - script:
      name: Install Surge
      code: npm install --global surge
    - script:
      name: Push to surge.sh
      code: surge build/ $SURGE_DOMAIN
